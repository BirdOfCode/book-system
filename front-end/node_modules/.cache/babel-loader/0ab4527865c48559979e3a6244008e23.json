{"remainingRequest":"D:\\webSource\\book-recommend\\front-end\\node_modules\\babel-loader\\lib\\index.js!D:\\webSource\\book-recommend\\front-end\\src\\network\\axios.js","dependencies":[{"path":"D:\\webSource\\book-recommend\\front-end\\src\\network\\axios.js","mtime":1585965734766},{"path":"D:\\webSource\\book-recommend\\front-end\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\webSource\\book-recommend\\front-end\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCBvcmdpbiBmcm9tICdheGlvcyc7CmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGF4aW9zKG9wdGlvbikgewogIC8vIDEu5Yib5bu6YXhpb3PnmoTlrp7kvosKICAvLyBiYXNlVVJM562J6YWN572u5omN5Y+q5Lya6YWN572u5Zyo5a6e5L6L5LiK77yM5aaC5p6c5LiN5L2/55SoY3JlYXRl77yI77yJ77yM6K+35rGC5YWo6YO95L2/55So5ZCM5LiA5Liq6YWN572u77yI5YWo5bGA6YWN572u77yJCiAgdmFyIGluc3RhbmNlID0gb3JnaW4uY3JlYXRlKHsKICAgIGJhc2VVUkw6ICdodHRwOi8vMTkyLjE2OC4wLjEwMTozMDAwL2FwaScsCiAgICB0aW1lb3V0OiA1MDAwCiAgfSk7IC8v6K+35rGC5oum5oiq77yM5Zyo6K+35rGC5aS06YeM5Yqg5YWldG9rZW4KCiAgaW5zdGFuY2UuaW50ZXJjZXB0b3JzLnJlcXVlc3QudXNlKGZ1bmN0aW9uIChjb25maWcpIHsKICAgIGlmIChsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndG9rZW4nKSkgewogICAgICBjb25maWcuaGVhZGVycy5BdXRob3JpemF0aW9uID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3Rva2VuJyk7CiAgICB9CgogICAgcmV0dXJuIGNvbmZpZzsKICB9LCBmdW5jdGlvbiAoZXJyb3IpIHsKICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcik7CiAgfSk7IC8v5ZON5bqU5oum5oiq77yM5bCG5ZCO56uv6L+U5Zue55qEdG9rZW7lrZjlgqjlnKhsb2NhbHN0b3JhZ2UKCiAgaW5zdGFuY2UuaW50ZXJjZXB0b3JzLnJlc3BvbnNlLnVzZShmdW5jdGlvbiAoY29uZmlnKSB7CiAgICBpZiAoY29uZmlnLmRhdGEudG9rZW4pIHsKICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKCd1c2VybmFtZScsIGNvbmZpZy5kYXRhLmRhdGEudG9rZW4pOwogICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3Rva2VuJywgY29uZmlnLmRhdGEudG9rZW4pOwogICAgfQoKICAgIHJldHVybiBjb25maWc7CiAgfSAvLyBlcnJvciA9PiB7CiAgLy8gICBjb25zdCBlcnJSZXMgPSBlcnJvci5yZXNwb25zZTsKICAvLyAgIGlmIChlcnJSZXMuc3RhdHVzID09PSA0MDEpIHsKICAvLyAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCd0b2tlbicpOwogIC8vICAgICBzd2FsKCdBdXRoIEVycm9yIScsIGAke2VyclJlcy5kYXRhLmVycm9yLm1lc3NhZ2V9LCBwbGVhc2UgbG9naW4hYCwgJ2Vycm9yJykKICAvLyAgICAgICAudGhlbigoKSA9PiB7CiAgLy8gICAgICAgICBoaXN0b3J5LnB1c2goJy9sb2dpbicpOwogIC8vICAgICAgIH0pOwogIC8vICAgfQogIC8vICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yLm1lc3NhZ2UpOyAgIC8vIOi/lOWbnuaOpeWPo+i/lOWbnueahOmUmeivr+S/oeaBrwogIC8vIH0KICApOwogIHJldHVybiBpbnN0YW5jZShvcHRpb24pOwp9"},{"version":3,"sources":["D:/webSource/book-recommend/front-end/src/network/axios.js"],"names":["orgin","axios","option","instance","create","baseURL","timeout","interceptors","request","use","config","localStorage","getItem","headers","Authorization","error","Promise","reject","response","data","token","window","setItem"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAEA,eAAe,SAASC,KAAT,CAAgBC,MAAhB,EAAwB;AACrC;AACA;AACA,MAAMC,QAAQ,GAAGH,KAAK,CAACI,MAAN,CAAa;AAC5BC,IAAAA,OAAO,EAAE,+BADmB;AAE5BC,IAAAA,OAAO,EAAE;AAFmB,GAAb,CAAjB,CAHqC,CAOrC;;AACAH,EAAAA,QAAQ,CAACI,YAAT,CAAsBC,OAAtB,CAA8BC,GAA9B,CACE,UAAAC,MAAM,EAAI;AACR,QAAIC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAJ,EAAmC;AACjCF,MAAAA,MAAM,CAACG,OAAP,CAAeC,aAAf,GAA+BH,YAAY,CAACC,OAAb,CAAqB,OAArB,CAA/B;AACD;;AACD,WAAOF,MAAP;AACD,GANH,EAOE,UAAAK,KAAK,EAAI;AACP,WAAOC,OAAO,CAACC,MAAR,CAAeF,KAAf,CAAP;AACD,GATH,EARqC,CAmBrC;;AACAZ,EAAAA,QAAQ,CAACI,YAAT,CAAsBW,QAAtB,CAA+BT,GAA/B,CACE,UAAAC,MAAM,EAAI;AACR,QAAIA,MAAM,CAACS,IAAP,CAAYC,KAAhB,EAAuB;AACrBC,MAAAA,MAAM,CAACV,YAAP,CAAoBW,OAApB,CAA4B,UAA5B,EAAwCZ,MAAM,CAACS,IAAP,CAAYA,IAAZ,CAAiBC,KAAzD;AACAC,MAAAA,MAAM,CAACV,YAAP,CAAoBW,OAApB,CAA4B,OAA5B,EAAqCZ,MAAM,CAACS,IAAP,CAAYC,KAAjD;AACD;;AACD,WAAOV,MAAP;AACD,GAPH,CAQE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAlBF;AAqBA,SAAOP,QAAQ,CAACD,MAAD,CAAf;AACD","sourcesContent":["import orgin from 'axios'\r\n\r\nexport default function axios (option) {\r\n  // 1.创建axios的实例\r\n  // baseURL等配置才只会配置在实例上，如果不使用create（），请求全都使用同一个配置（全局配置）\r\n  const instance = orgin.create({\r\n    baseURL: 'http://192.168.0.101:3000/api',\r\n    timeout: 5000\r\n  })\r\n  //请求拦截，在请求头里加入token\r\n  instance.interceptors.request.use(\r\n    config => {\r\n      if (localStorage.getItem('token')) {\r\n        config.headers.Authorization = localStorage.getItem('token');\r\n      }\r\n      return config;\r\n    },\r\n    error => {\r\n      return Promise.reject(error);\r\n    })\r\n\r\n  //响应拦截，将后端返回的token存储在localstorage\r\n  instance.interceptors.response.use(\r\n    config => {\r\n      if (config.data.token) {\r\n        window.localStorage.setItem('username', config.data.data.token);\r\n        window.localStorage.setItem('token', config.data.token);\r\n      }\r\n      return config;\r\n    },\r\n    // error => {\r\n    //   const errRes = error.response;\r\n    //   if (errRes.status === 401) {\r\n    //     window.localStorage.removeItem('token');\r\n    //     swal('Auth Error!', `${errRes.data.error.message}, please login!`, 'error')\r\n    //       .then(() => {\r\n    //         history.push('/login');\r\n    //       });\r\n    //   }\r\n    //   return Promise.reject(error.message);   // 返回接口返回的错误信息\r\n    // }\r\n  )\r\n\r\n  return instance(option)\r\n}\r\n\r\n"]}]}